<div *ngIf="stageInformation" class="row justify-content-md-center">
  <img *ngIf="stageInformation" width="70%" style="margin-top: 20px; margin-bottom: 30px;"
       src="assets/als-progress/ALS%20Progress-Stage-{{stageInformation.current_stage}}.png"/>
  <h2 *ngIf="showPrediction" style="margin-bottom: 20px;">We predict between {{stageInformation.expected_days_min}} and {{stageInformation.expected_days_max}} weeks until the next stage!</h2>
  <h2 *ngIf="!showPrediction" style="margin-bottom: 20px;">We can not predict the next stage because it might be too far in the future.</h2>
</div>

<div class="row justify-content-md-center">
  <div class="col-4 p-2">
    <div *ngIf="patient" class="patientdetail-inner">
      <div style="color: white" class="detailview-title title-info">{{patient.first_name}} {{patient.last_name}} </div>
      <table *ngIf="patientDetail" class="detailview-table">
        <tbody>
        <tr>
          <td>Date of birth:</td>
          <td>{{patientDetail.date_of_birth}}</td>
        </tr>
        <tr>
          <td>Date of diagnosis:</td>
          <td>{{patientDetail.date_of_diagnosis}}</td>
        </tr>
        <tr>
          <td>Emergency contact:</td>
          <td>{{patientDetail.emergency_contact}}</td>
        </tr>
        <tr>
          <td>Address of residence:</td>
          <td>{{patientDetail.address}}</td>
        </tr>
        <tr>
          <td>Allergies:</td>
          <td>{{patientDetail.allergies}}</td>
        </tr>
        <tr>
          <td>Notes:</td>
          <td>{{patientDetail.notes}}</td>
        </tr>
        </tbody>
      </table>
    </div>

    <div *ngIf="stageInformation"  class="patientdetail-inner">
      <div style="color: white" class="detailview-title title-info">Recommendation</div>
      <div *ngFor="let s of stageInformation.suggestions">
        <p>{{s["text"]}}</p><a href="{{s['link']}}" target="_blank">More information</a>
      </div>
    </div>
  </div>
  <div class="col-8 p-2">
    <div style="margin-left: 20px" class="detailview-title title-ltm">My Data</div>
    <div class="detailview-plot-title">Mobility</div>
    <plotly-plot [data]="mobility" [layout]="{margin: {l: 80, r: 80, t: 10, b: 20}, height: 250, plot_bgcolor: '#f3f2f8', paper_bgcolor: '#f3f2f8'}"></plotly-plot>
    <div class="detailview-plot-title">Strength</div>
    <plotly-plot [data]="strength" [layout]="{margin: {l: 80, r: 80, t: 10, b: 20}, height: 250, plot_bgcolor: '#f3f2f8', paper_bgcolor: '#f3f2f8'}"></plotly-plot>
    <div class="detailview-plot-title">Blood Oxygen Saturation</div>
    <plotly-plot [data]="bloodOxygen" [layout]="{margin: {l: 80, r: 80, t: 10, b: 20}, height: 250, plot_bgcolor: '#f3f2f8', paper_bgcolor: '#f3f2f8'}"></plotly-plot>
    <div class="detailview-plot-title">Avg. Heart Rate per Day</div>
    <plotly-plot [data]="heartRate" [layout]="{margin: {l: 80, r: 80, t: 10, b: 20}, height: 250, plot_bgcolor: '#f3f2f8', paper_bgcolor: '#f3f2f8'}"></plotly-plot>
  </div>
</div>
